<?xml version="1.0"?>
<syntax name="styling.sass">
    <zones>
    	<zone name="keyword.important.sass">
    		<expression>\!\s*important</expression>
    	</zone>
    
    	<zone name="at-rule.import.sass">
    		<starts-with>
    		    <expression>^\s*((@)import\b)</expression>
    		    <capture number="1" name="keyword.control"/>
    		    <capture number="2" name="punctuation.definition.keyword"/>
    		</starts-with>
    		<ends-with>
    			<expression>$</expression>
    		    <capture number="0" name="punctuation.definition.end"/>
    		</ends-with>
    		<subzones>
    			<include collection="file-name"/>
    		</subzones>	
    	</zone>
    	
    	<include collection="sass-variable"/>
    	<include collection="sass-mixin"/>
    	<include collection="sass-mixin-definition"/>
    	<include collection="comments"/>

    	<zone name="style.sass">
    	    <starts-with>(?=[:.&amp;>+*#a-zA-Z@])</starts-with>
    	    <ends-with>^\s*\n</ends-with>
    	   	
    	   	<subzones>
    	   	
    	   		<zone name="selector.psuedo.sass">
    	   			<expression>:[a-zA-Z0-9_-]+</expression>
    	   		</zone>
    	   	
    	   		<include collection="properties"/>

   				<zone name="selector.class.sass">
   					<expression>\.[a-zA-Z0-9_-]+</expression>
   				</zone>
   				<zone name="selector.id.sass">
   					<expression>#[a-zA-Z0-9_-]+</expression>
   				</zone>
   				
   				<zone name="selector.parent.sass">
   					<expression>&amp;</expression>
   				</zone>
   				<zone name="selector.child.sass">
   					<expression>>\s*</expression>
   				</zone>
   				<zone name="selector.adjacent.sass">
   					<expression>\+\s+</expression>
   				</zone>
   				
   				<zone name="selector.advanced.sass">
   					<expression>\[[a-zA-Z0-9'"#.:=_ -]+\]</expression>
   				</zone>
   				
   				<zone name="selector.named.sass">
   					<expression>(xmp|video|var|ul|u|tt|tr|title|time|thead|th|tfoot|textarea|td|tbody|table|sup|sub|style|strong|strike|span|source|small|select|section|script|samp|s|ruby|rt|rp|q|progress|pre|param|p|output|option|optgroup|ol|object|noscript|noframes|nav|meter|meta|menu|mark|map|link|li|legend|label|keygen|kbd|ins|input|img|iframe|i|html|hr|hgroup|header|head|h6|h5|h4|h3|h2|h1|frameset|frame|form|footer|figure|fieldset|embed|em|dt|dl|div|dialog|dfn|details|del|dd|datalist|command|colgroup|col|code|cite|center|caption|canvas|button|br|body|blockquote|big|bdo|base|b|audio|aside|article|area|applet|address|acronym|abbr|a|\*)</expression>
   				</zone>
   				
   				<include collection="comments"/>
   				<subzones>
   					<include collection="comments"/>
   				</subzones>
    	   		
    	   	</subzones>
    	</zone>
    </zones>
    
    
    
	<library>
	
		<collection name="properties">
			<include collection="sass-mixin"/>
			<zone name="property-name">
				<expression>\b(zoom|z-index|writing-mode|word-wrap|word-spacing|word-break|width|widows|white-space|weight|volume|voice-family|visibility|vertical-align|variant|unicode-bidi|type|top|text-underline-position|text-transform|text-shadow|text-overflow|text-kashida-space|text-justify|text-indent|text-decoration|text-autospace|text-align-last|text-align|table-layout|style|stress|speech-rate|speak-punctuation|speak-numeral|speak-header|speak|size|scrollbar-track-color|scrollbar-shadow-color|scrollbar-highlight-color|scrollbar-face-color|scrollbar-dark-shadow-color|scrollbar-base-color|scrollbar-arrow-color|scrollbar-3d-light-color|ruby-position |ruby-overhang|ruby-align|right|richness|repeat|quotes|position|play-during|pitch-range|pitch|pause-before|pause-after|pause|page-break-inside|page-break-before|page-break-after|page|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-Y|overflow-X|overflow|outline-width|outline-style|outline-color|outline|orphans|min-width|min-height|max-width|max-height|marks|marker-offset|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|line-break|letter-spacing|left|layout-grid-type|layout-grid-mode|layout-grid-line|layout-grid-char-spacing|layout-grid-char|layout-grid|layout-flow|layer-background-image|layer-background-color|include-source |ime-mode|image|height|font-weight|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-family|font|float|filter|family|empty-cells|elevation|display|direction|cursor|cue-before|cue-after|cue|counter-reset|counter-increment|content|color|collapse|clip|clear|caption-side|bottom|border-width|border-top-width|border-top-style|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-left-width|border-left-style|border-left-color|border-left|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-color|border-bottom|border|behavior|background-repeat|background-position-y|background-position-x|background-position|background-image|background-color|background-attachment|background|azimuth|attachment|accelerator|-use-link-source|-set-link-source|-replace|-moz-user-select|-moz-user-modify|-moz-user-input|-moz-user-focus|-moz-outline-width|-moz-outline-style|-moz-outline-color|-moz-outline|-moz-opacity|-moz-border-top-colors|-moz-border-right-colors|-moz-border-radius-topright|-moz-border-radius-topleft|-moz-border-radius-bottomright|-moz-border-radius-bottomleft|-moz-border-radius|-moz-border-left-colors|-moz-border-bottom-colors|-moz-binding)</expression>
			</zone>
			<include collection="values"/>
			
		</collection>
		
		<collection name="file-name">
			<zone name="file.sass">
				<expression>([\/a-zA-Z0-9_-]+)(\.)([a-zA-Z0-9_-]+)</expression>
				<capture number="2" name="punctuation.path.seperator"/>
				<capture number="3" name="file.extension.sass"/>
			</zone>
		</collection>
		
		<collection name="comments">
			<zone name="comment.block.sass">
			    <starts-with>
			        <expression>/\*</expression>
			        <capture number="0" name="punctuation.begin"/>
			    </starts-with>
			    <ends-with>
			        <expression>\*/</expression>
			        <capture number="0" name="punctuation.end"/>
			    </ends-with>
			</zone>
			<zone name="comment.line.sass">
			    <starts-with>
			        <expression>//</expression>
			        <capture number="0" name="punctuation.begin"/>
			    </starts-with>
			    <ends-with>$</ends-with>
			</zone>
		</collection>
		
		<collection name="values">
			<zone name="property-value">
				<starts-with>
					<expression>\b(\s=)|(:)(?=[^\n])</expression>
					<capture number="0" name="punctuation.separator.key-value.sass"/>
				</starts-with>
				<ends-with>
					<expression>\n</expression>
				</ends-with>
				<subzones>
					<include collection="comments"/>
					<include collection="sass-variable"/>
					<include collection="string"/>
					
					<zone name="keyword.property-value.sass">
						<expression>\b(absolute|all-scroll|always|auto|baseline|below|bidi-override|block|bold|bolder|both|bottom|break-all|break-word|capitalize|center|char|circle|col-resize|collapse|crosshair|dashed|decimal|default|disabled|disc|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ellipsis|fixed|groove|hand|help|hidden|horizontal|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|inactive|inherit|inline-block|inline|inset|inside|inter-ideograph|inter-word|italic|justify|keep-all|left|lighter|line-edge|line-through|line|list-item|loose|lower-alpha|lower-roman|lowercase|lr-tb|ltr|medium|middle|move|n-resize|ne-resize|newspaper|no-drop|no-repeat|nw-resize|none|normal|not-allowed|nowrap|oblique|outset|outside|overline|pointer|progress|relative|repeat-x|repeat-y|repeat|right|ridge|row-resize|rtl|s-resize|scroll|se-resize|separate|small-caps|solid|square|static|strict|super|sw-resize|table-footer-group|table-header-group|tb-rl|text-bottom|text-top|text|thick|thin|top|transparent|underline|upper-alpha|upper-roman|uppercase|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace)\b</expression>
					</zone>
					<zone name="zconstant.nzumeric.sass">
						<expression>(-|\+)?\s*[0-9]+(\.[0-9]+)?</expression>
					</zone>
					<zone name="zkeyword.other.zunit.sass">
						<expression>(?&lt;=[\d])(px|pt|cm|mm|in|em|ex|pc|s|ms)\b|%</expression>
					</zone>
					<zone name="constant.font-name.sass">
					    <expression>(\b(?i:arial|century|comic|courier|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace)\b)</expression>
					</zone>
					<zone name="zconstant.zother.color.rgb-value.sass">
						<expression>(#)([0-9a-fA-F]{3}|[0-9a-fA-F]{6})\b</expression>
						<capture number="1" name="punctuation.definition.constant.sass"/>
					</zone>
					
					<zone>
						<starts-with>
							<expression>(rgb|rgba|url|attr|counter|counters)\s*(\()</expression>
							<capture number="1" name="support.function.misc.sass"/>
							<capture number="2" name="punctuation.section.function.sass"/>
						</starts-with>
						<ends-with>
							<expression>(\))</expression>
							<capture number="1" name="punctuation.section.function.sass"/>
						</ends-with>
						<subzones>
							<include collection="string"/>
							<zone name="constant.other.color.rgb-value.sass">
								<expression>(\b0*((1?[0-9]{1,2})|(2([0-4][0-9]|5[0-5])))\s*,\s*)(0*((1?[0-9]{1,2})|(2([0-4][0-9]|5[0-5])))\s*,\s*)(0*((1?[0-9]{1,2})|(2([0-4][0-9]|5[0-5])))\b)</expression>
							</zone>
							<zone name="constant.other.color.rgb-percentage.sass">
								<expression>\b([0-9]{1,2}|100)\s*%,\s*([0-9]{1,2}|100)\s*%,\s*([0-9]{1,2}|100)\s*%</expression>
							</zone>
							<zone name="variable.parameter.misc.sass">
								<expression>[^'") \t]+</expression>
							</zone>
						</subzones>
					</zone>
				</subzones>
			</zone>
		</collection>
		
		<collection name="string">
			<zone name="string.quoted.double">
			    <starts-with>
			        <expression>"</expression>
			        <capture number="0" name="punctuation.definition.string.begin.css"/>
			    </starts-with>
			    <ends-with>
			        <expression>"</expression>
			        <capture number="0" name="punctuation.definition.string.end.css"/>
			    </ends-with>
			    <subzones>
			        <zone name="constant.character.escaped.sass">
			            <expression>\\.</expression>
			        </zone>
			    </subzones>
			</zone>
		</collection>
		
		<collection name="sass-variable">
			<zone name="variable.definition.style.sass">
			    <starts-with>
			    	<expression>(!)([a-zA-Z0-9_-]+(?= =))</expression>
			    	<capture number="1" name="punctuation.definition.variable.sass"/>
			    	<capture number="2" name="variable.property-name.sass"/>
			    </starts-with>
			    <ends-with>
			    	<expression>$</expression>
			    </ends-with>
			    <subzones>
			    	<include collection="values"/>
			    </subzones>
			</zone>
			<zone name="variable.style.sass">
			    <starts-with>
			    	<expression>(!)([a-zA-Z0-9_-]+)</expression>
			    	<capture number="1" name="punctuation.definition.variable.sass"/>
			    	<capture number="2" name="variable.property-name.sass"/>
			    </starts-with>
			    <ends-with>
			    	<expression>$|\s|}</expression>
			    </ends-with>
			</zone>
		</collection>
		<collection name="sass-mixin">
			<zone name="mixin.sass">
				<starts-with>
					<expression>(\+)([a-zA-Z0-9_-]+)(\()?</expression>
					<capture number="1" name="punctuation.definition.mixin.sass"/>
					<capture number="2" name="mixin.name.sass"/>
					<capture number="3" name="punctuation.definition.begin"/>
				</starts-with>
				<ends-with>
					<expression>(\))|$</expression>
					<capture number="0" name="punctuation.definition.end"/>
				</ends-with>
				<subzones>
					<include collection="string"/>
					<zone name="zconstant.nzumeric.sass">
						<expression>(-|\+)?\s*\.?[0-9]+(\.[0-9]+)?</expression>
					</zone>
					<zone name="zkeyword.other.zunit.sass">
						<expression>(?&lt;=[\d])(px|pt|cm|mm|in|em|ex|pc|s|ms)\b|%</expression>
					</zone>
					<zone name="punctuation.variable-seperator.sass">
						<expression>,</expression>
					</zone>
					<zone name="variable.parameter.misc.sass">
						<expression>[^'") \t]+</expression>
					</zone>
				</subzones>
			</zone>
		</collection>
		<collection name="sass-mixin-definition">
			<zone name="mixin.definition.sass">
				<starts-with>
					<expression>(^=)([a-zA-Z0-9_-]+)((\()([a-zA-Z0-9_!,'" -]+)(\)))?</expression>
				</starts-with>
				<ends-with>^\s*\n</ends-with>
				<subzones>
					<include collection="properties"/>
				</subzones>
			</zone>
		</collection>
	</library>
</syntax>